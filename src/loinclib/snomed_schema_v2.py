"""SNOMED Schema"""

from dataclasses import dataclass

from loinclib import NodeType, EdgeType, PropertyType, NodeTypeArgs, PropertyTypeArgs, EdgeTypeArgs


@dataclass(kw_only=True)
class SnomedNodeTypeArgs(NodeTypeArgs):
  pass


class SnomedNodeType(NodeType):
  """SNOMED Node Types"""

  concept = SnomedNodeTypeArgs(name="Concept", id_prefix="sct")


@dataclass(kw_only=True)
class SnomedPropertiesArgs(PropertyTypeArgs):
  pass


class SnomedProperties(PropertyType):
  """SNOMED Properties"""

  concept_id = SnomedPropertiesArgs(name="")
  fully_specified_name = SnomedPropertiesArgs(name="900000000000003001")


@dataclass(kw_only=True)
class SnomedEdgesArgs(EdgeTypeArgs):
  pass


class SnomedEdges(EdgeType):
  """SNOMED Edges"""

  is_a = SnomedEdgesArgs(name="116680003")
  maps_to = SnomedEdgesArgs(name="maps_to")  # this maps external ids to one and only one SNOMED concept

  # the following edges are used in the LOINC SNOMED module
  component = SnomedEdgesArgs(name="246093002")
  technique = SnomedEdgesArgs(name="246501002")
  property = SnomedEdgesArgs(name="370130000")
  scale_type = SnomedEdgesArgs(name="370132008")
  specimen_substance = SnomedEdgesArgs(name="370133003")
  time_aspect = SnomedEdgesArgs(name="370134009")
  inheres_in = SnomedEdgesArgs(name="704319004")
  precondition = SnomedEdgesArgs(name="704326004")
  direct_site = SnomedEdgesArgs(name="704327008")

#   loinc snomed relationships
#   08:05 $ csvtool -t TAB  col 8 xsct2_Relationship_Snapshot_LO1010000_20231015.txt | sort | uniq -c
#   27445   116680003  is-a
#   23707   246093002
#   6617    246501002
#   23835   370130000
#   23834   370132008
#   3       370133003
#   23782   370134009
#   127     704319004
#   378     704326004
#   23220   704327008
#   1       typeId


# international snomed relationships
# 10:45 $ csvtool -t TAB  col 8 sct2_Relationship_Snapshot_INT_20240801.txt | sort | uniq -c
# 135 1003703000
# 877 1003735000
# 256 1148965004
# 35 1148967007
# 4 1148968002
# 170 1148969005
# 13 1149366004
# 19 1149367008
# 295924 116676008
# 6305 116678009
# 1165692 116680003
# 64 116683001
# 4992 116686009
# 295 118168003
# 3415 118169006
# 406 118170007
# 2067 118171006
# 53710 123005000
# 67139 127489000
# 283 131195008
# 91056 246075003
# 12908 246090004
# 20541 246093002
# 988 246100006
# 508 246112005
# 4 246196007
# 26 246267002
# 51187 246454002
# 191 246456000
# 797 246501002
# 4221 246513007
# 47 246514001
# 9692 255234002
# 8 258214002
# 10020 260507000
# 3123 260669005
# 296637 260686004
# 1305 260858005
# 2053 260870009
# 4808 260908002
# 7642 261583007
# 7164 263502005
# 1590 263535000
# 26343 272741003
# 1 288556008
# 16602 308489006
# 368 309824003
# 6173 363589002
# 390630 363698007
# 20236 363699004
# 31915 363700003
# 25015 363701004
# 8425 363702006
# 27396 363703001
# 130538 363704007
# 10783 363705008
# 3778 363708005
# 1961 363709002
# 222 363710007
# 32232 363713009
# 98931 363714003
# 702 363715002
# 78 367346004
# 3410 370127007
# 70 370129005
# 3487 370130000
# 182 370131001
# 2983 370132008
# 2021 370133003
# 2173 370134009
# 47126 370135005
# 783 371881003
# 94564 405813007
# 29908 405814001
# 1072 405815000
# 927 405816004
# 11576 408729009
# 5820 408730004
# 17532 408731000
# 17417 408732007
# 444 410675002
# 34587 411116001
# 9521 418775008
# 2743 419066007
# 14814 424226004
# 1709 424244007
# 8232 424361007
# 1942 424876005
# 3955 425391005
# 26052 42752001
# 5315 47429007
# 167 704318007
# 3270 704319004
# 2 704320005
# 3635 704321009
# 781 704323007
# 492 704324001
# 405 704325000
# 115 704326004
# 1148 704327008
# 1582 718497002
# 4 719715003
# 1927 719722006
# 10650 726542003
# 148 726633004
# 12311 732943007
# 6689 732944001
# 8234 732945000
# 6013 732946004
# 7951 732947008
# 4111 733722007
# 3059 733723002
# 3063 733724008
# 4130 733725009
# 473 736472000
# 447 736473005
# 527 736474004
# 464 736475003
# 452 736476002
# 149 736518005
# 2636 738774007
# 11975 762949000
# 6671 763032000
# 10756 766939001
# 14722 766952006
# 22 766953001
# 7 827081001
# 991 836358009
# 495 840560000
# 921 840562008
# 6 860779006
# 13 860781008
# 1 typeId
